<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Métricas, alertas e dashboards</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<style>
		.red {
			color: red;
		}

		.blue {
			color: #1b91ff;
		}

		.green {
			color: #c1ff0b;
		}

		.orange {
			color: orange;
		}

		.gray {
			color: #3f3f3f;
		}

		.yellow {
			color: #F4FF77;
		}

		.black {
			color: black;
		}

		.shadowed {
			text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
		}
	</style>

</head>
<body>
<div class="reveal">
	<div class="slides">

		<section>
			<h1 class="shadowed">
				<span class="blue">Métricas</span>, <span class="red">Alertas</span> e
				<span class="green">Dashboards</span>
			</h1>
			<p class="shadowed">
				<small>
					<a href="http://mauricio.github.io/">Maurício Linhares</a> /
					<a href="http://twitter.com/mauriciojr">@mauriciojr</a> /
					<span class="shadowed">Software Engineer at DigitalOcean</span>
				</small>
			</p>
		</section>

		<section>
			<h1>Por que?</h1>
			<p>
				Precisamos entender como sistemas em <span class="green">produção</span>
				estão <span class="blue">executando</span>.
			</p>
		</section>

		<section>
			<h1><span class="green">Métricas</span></h1>
			<ul>
				<li>arte da retórica que trata da medida dos versos; metrificação.</li>
				<li>o método de medir coisas ou os resultados obtidos ao medir</li>
			</ul>
		</section>

		<section>
			<h1><span class="orange">Métricas</span></h1>
			<ul>
				<li class="gray">arte da retórica que trata da medida dos versos; metrificação.</li>
				<li class="green">o método de medir coisas ou os resultados obtidos ao medir</li>
			</ul>
		</section>

		<section>
			<h1>Onde começar?</h1>
			<p>
				Qualquer recurso <span class="red">finito</span> que você esteja usando.
			</p>
		</section>

		<section>
			<h1><span class="green">Quais?</span></h1>
			<ul>
				<li>CPU time</li>
				<li>File system handles</li>
				<li>Uso de memória</li>
				<li>Espaço em disco</li>
			</ul>
		</section>

		<section>
			<h1>Por que?</h1>
			<p>
				Essas métricas fornecem uma <span class="orange">idéia</span> do que está acontecendo
				com o sistema no geral e ajudam a perceber <span class="green">diferenças</span> em hosts diferentes executando
				a <span class="red">mesma</span> aplicação.
			</p>
		</section>

		<section data-background-image="images/gotit.jpg">
		</section>

		<section>
			<h1>Métricas de aplicações</h1>
			<ul>
				<li>
					Quantidade de <span class="orange">operações</span>
				</li>
				<li>
					<span class="red">Tempo</span> de resposta
				</li>
				<li>
					Operações com <span class="green">sucesso</span>, degradadas ou com erro
				</li>
				<li>
					<span class="yellow">Durabilidade</span>, dá pra achar as informações que enviamos?
				</li>
				<li>
					<span class="blue">Corretude</span>, encontramos os dados corretos de volta?
				</li>
			</ul>
		</section>

		<section>
			<h1>Dá <span class="orange">tempo</span> de adicionar mais?</h1>
			<p>
				Mesmas métricas anteriores mas pros sub-sistemas que você chama da sua aplicação:
				<span class="green">banco de dados</span>, <span class="blue">caches</span> (incluir cache hits), <span
					class="red">acesso ao sistema de arquivos</span>,
				<span class="orange">outras aplicações</span> sendo chamadas.
			</p>
		</section>

		<section>
			<h1>Não use <span class="red">médias</span></h1>
			<p>
				Seis usuários carregam o seu site em <span class="orange">0.1 segundos</span>,
				4 em <span class="blue">2 segundos</span>, média é <span class="yellow">0.86</span>.
			</p>
		</section>

		<section data-background-image="images/wtf.jpg">
		</section>

		<section>
			<h1>Médias são  <span class="red">terríveis</span> pra detectar <span class="blue">extremos</span></h1>
			<p>
				Elas podem mostrar um número aceitável mas <span class="orange">50% dos seus clientes</span>
				estão tendo uma experiência horrível. Use percentis.
			</p>
		</section>

		<section>
			<h1>Ainda assim, percentis são <span class="orange">difíceis</span></h1>
			<p>
				Especialmente no início, não exagere nos números, escolha um grupo de percentis que faz sentido
				pro nível operacional das suas aplicações <span class="green">(0.90, 0.95 e 0.99, por exemplo)</span>.
				Pra cada 9 depois de 0.99 vai ser <span class="blue">exponencialmente</span> mais difícil e caro.
			</p>
		</section>

		<section>
			<h1>Não espere que as métricas da sua aplicação <span class="blue">representam tudo</span></h1>
			<p>
				Legal, sua aplicação tem métricas e elas estão <span class="green">ótimas</span>, mas clientes
				ainda estão reclamando que a aplicação não está <span class="red">se comportando corretamente</span>.
			</p>
		</section>

		<section>
			<h1>Colete próximo do seu <span class="yellow">cliente</span></h1>
			<p>
				Isso não significa que você <span class="green">não deva</span> coletar elas na sua aplicação, mas você precisa ter uma visão
				externa, como os seus clientes, pra ter certeza que os numeros realmente <span class="blue">batem</span>.
			</p>
		</section>

		<section>
			<h1><span class="red">Não dá pra fazer?</span></h1>
			<p>
				Crie <span class="green">aplicações de teste</span> que chamam o seu serviço como <span class="yellow">clientes externos</span>
				chamariam, replicando ao máximo os ambientes que os seus sistemas usam (localização geográfica, acesso a rede,
				linguagens, sistemas operacionais).
			</p>
		</section>

		<section data-background-image="images/nuclear.jpg">
			<h1>Alertas</h1>
			<p>
				<span class="black">A bomba nuclear</span>
			</p>
		</section>

		<section>
			<h1>3 da manhã, você está <span class="blue">de ressaca</span></h1>
			<p>
				Alerta chega, máquina <span class="yellow">morreu</span>, precisa mover a aplicação pra uma
				<span class="orange">nova máquina</span>.
			</p>
		</section>

		<section>
			<h1><span class="red">406</span></h1>
			<p><span class="blue">Not Acceptable</span></p>
		</section>

		<section>
			<h1>Podemos <span class="green">automatizar</span> a resposta?</h1>
			<p>
				Não é um <span class="red">alerta</span>.
			</p>
		</section>

		<section>
			<h1><span class="green">Alertas padrão</span></h1>
			<ul>
				<li><span class="red">Níveis superiores e inferiores</span> de tráfego/uso</li>
				<li><span class="orange">Ultrapassando</span> limites de hardware</li>
				<li><span class="yellow">Crescimento contínuo</span> (vazamentos de memória, threads ou sistemas de arquivos)</li>
			</ul>
		</section>

		<section>
			<h1>O que significa estar com a aplicação <span class="green">saudável</span>?</h1>
			<p>
				Cada uma das suas métricas principais é um <span class="orange">Service Level Indicator</span>. Juntando
				todas você cria um<span class="blue">Service Level Objective</span>.
			</p>
		</section>

		<section>
			<h1>Objetivo!</h1>
			<p>
				<span class="blue">53% das visitas</span> vão  <span class="red">largar</span> o site se as páginas
				demoram mais de <span class="orange">3 segundos</span> pra carregar.
			</p>
		</section>

		<section>
			<h1> Não <span class="red">exagere</span></h1>
			<p>
				Definir um objetivo usando como base os limites o seu sistema atual vai criar muita dor de cabeça, seja
				generoso quando estiver começando e aperte os números conforme o nível operacional melhorar.
			</p>
		</section>

		<section>
			<h1>Exemplo!</h1>
			<ul>
				<li>0.90 em <span class="green">500ms</span></li>
				<li>0.95 em <span class="orange">1 segundo</span></li>
				<li>0.99 em <span class="red">2 segundos</span></li>
				<li>Não mais do que <span class="yellow">0.1%</span> de operações com erro</li>
			</ul>
		</section>

		<section>
			<h1>E agora <span class="red">alerte</span> nesses numeros!</h1>
		</section>

		<section>
			<h1>Alertas precisam de <span class="green">manuais</span></h1>
			<ul>
				<li><span class="red">O que</span> é o alerta</li>
				<li>Lugares onde obter <span class="orange">mais informações</span> sobre o alerta</li>
				<li><span class="blue">Motivos</span> mais comuns para o alerta</li>
			</ul>
		</section>

		<section>
			<h1>Alertas precisam de  <span class="green">acompanhamento</span></h1>
			<ul>
				<li>Esse alerta é <span class="red">útil</span>?</li>
				<li>É possível <span class="yellow">automatizar</span> a resposta?</li>
				<li>Tem alguma <span class="orange">outra métrica</span> que pode ser usada pra evitar ter que alertar?</li>
				<li>É possível evitar que esse alerta aconteça com as mesmas <span
						class="blue">circunstancias</span>?
				</li>
			</ul>
		</section>

		<section>
			<h1>Se não tem nada pra <span class="green">aprender</span>...</h1>
			<p>... não é um <span class="red">alerta</span></p>
		</section>

		<section>
			<h1><span class="green">Aceite</span> erros</h1>
			<p>
				Erros acontecem, alertar em todos os erros é o caminho pra
				fazer todo mundo ignorar os alertas.
			</p>
		</section>

		<section data-background-image="images/dashboard.jpg">
			<h1>Dashboards</h1>
		</section>

		<section>
			<h1>Você <span class="red">não deve</span> ficar olhando <span class="green">dashboards</span> pra
			descobrir problemas</h1>
		</section>

		<section>
			<h1>Quando devemos olhar as nossas <span class="green">dashboards</span>?</h1>
			<ul>
				<li><span class="red">Outages</span></li>
				<li><span class="blue">Tendências inesperadas</span></li>
				<li>Não tem <span class="yellow">nada</span> melhor pra fazer</li>
			</ul>
		</section>

		<section>
			<p>
				<img src="images/flipper.png"/>
			</p>
		</section>

		<section>
			<h1>
				<span class="green">Grupos</span> diferentes precisam de <span class="yellow">dashboards</span> diferentes
			</h1>
		</section>

		<section>
			<p>
				<img src="images/triage.png"/>
			</p>
		</section>

		<section>
			<h1><span class="green">Seja direto</span></h1>
			<p>
				Você vai olhar pra elas durante outages, depois de acordar e quando você
				não tem a menor idéia do que está acontecendo, elas precisam ser fáceis de usar
				e entender.
			</p>
		</section>

		<section data-background-image="images/end.jpeg">
			<h1>The end</h1>
		</section>

	</div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info about config & dependencies:
  // - https://github.com/hakimel/reveal.js#configuration
  // - https://github.com/hakimel/reveal.js#dependencies
  Reveal.initialize({
    dependencies: [
      {src: 'plugin/markdown/marked.js'},
      {src: 'plugin/markdown/markdown.js'},
      {src: 'plugin/notes/notes.js', async: true},
      {
        src: 'plugin/highlight/highlight.js', async: true, callback: function () {
          hljs.initHighlightingOnLoad();
        }
      }
    ]
  });
</script>
</body>
</html>
